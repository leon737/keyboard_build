(function(e){function t(t){for(var o,r,c=t[0],u=t[1],a=t[2],l=0,f=[];l<c.length;l++)r=c[l],s[r]&&f.push(s[r][0]),s[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,a||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==s[u]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},s={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/keyboard_build/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var a=0;a<c.length;a++)t(c[a]);var d=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0e10":function(e){e.exports=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C"]},"13e5":function(e,t,n){},"3c6b":function(e,t,n){"use strict";var o=n("cda0"),s=n.n(o);s.a},"48cc":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"keyboard-container"},[n("Keyboard")],1),n("div",{staticClass:"lists-container"},[n("div",[n("Keys")],1),n("div",[n("Chords")],1)])])},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-checkbox",{on:{change:e.lockKeysChanged},model:{value:e.lockKeys,callback:function(t){e.lockKeys=t},expression:"lockKeys"}},[e._v("Lock keys")]),n("el-button",{attrs:{icon:"el-icon-close"},on:{click:e.reset}},[e._v(" Reset")])],1),n("div",{staticClass:"piano-keyboard"},e._l(e.keys,function(t){return n("div",{key:t.index,staticClass:"key",class:e.getWhiteOrBlackKeyClass(t.index),style:{left:e.getLeft(t.index)+"px"},on:{mousedown:function(n){return e.keyDown(t.index)},mouseup:function(n){return e.keyUp(t.index)}}},[n("div",{staticClass:"note-name"},[e._v(e._s(e.getNoteName(t.index)))])])}),0)])},c=[],u=(n("ac6a"),n("2ef0")),a=n("cf69"),d=n.n(a),l=(n("9733"),new o["default"]),f=l,h=d.a.hubConnection("http://127.0.0.1:8088"),m=h.createHubProxy("MyHub"),y=4,v=Object(u["range"])(12*y).map(function(e,t){return{index:t,down:!1}}),g=function(e){var t=e%12;switch(t){case 1:case 3:case 6:case 8:case 10:return!0;default:return!1}};m.on("addMessage",function(e,t){f.$emit(e,t)}),h.start({jsonp:!0}).done(function(){console.log("Now connected, connection ID="+h.id)}).fail(function(){console.log("Could not connect")});var p={data:function(){return{keys:v,lockKeys:!0}},computed:{demoKeys:function(){return this.$store.state.demoKeys},demoKey:function(){return this.$store.state.demoKey},demoChordMode:function(){return this.$store.state.demoChordMode}},methods:{getLeft:function(e){for(var t=0,n=0;n<e;++n)g(n)||(t+=50);return t},getWhiteOrBlackKeyClass:function(e){var t=g(e)?"black":"white",n=this.keys[e].down?"down":"up",o=Object(u["indexOf"])(this.demoKeys,this.demoChordMode?e:e%12)>=0;return[t,o?"".concat(t,"-demo"):"".concat(t,"-").concat(n)]},keyDown:function(e){this.lockKeys?this.keys[e].down=!this.keys[e].down:this.keys[e].down=!0,this.emitKeyChangedEvent()},keyUp:function(e){this.lockKeys||(this.keys[e].down=!1,this.emitKeyChangedEvent())},lockKeysChanged:function(e){this.lockKeys||(Object(u["each"])(this.keys,function(e){e.down=!1}),this.emitKeyChangedEvent())},emitKeyChangedEvent:function(){this.$store.dispatch("changePressedKeys",{keys:this.keys.filter(function(e){return!!e.down})})},reset:function(){Object(u["each"])(this.keys,function(e){e.down=!1}),this.emitKeyChangedEvent(),this.$store.dispatch("reset")},getNoteName:function(e){return this.demoKey&&this.demoKey.getNoteName?(e%=12,Object(u["some"])(this.demoKey.notes,function(t){return t==e})?this.demoKey.getNodeNameByLinearIndex(e):""):""}},mounted:function(){var e=this;f.$on("note on",function(t){t<36||t>83||(e.keys[t-36].down=!0,e.emitKeyChangedEvent())}),f.$on("note off",function(t){t<36||t>83||e.keyUp(t-36)})}},b=p,C=(n("3c6b"),n("2877")),K=Object(C["a"])(b,r,c,!1,null,"27ab5ea9",null),x=K.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("mode-selector",{staticClass:"margin-after",model:{value:e.modes,callback:function(t){e.modes=t},expression:"modes"}}),n("group-selector",{model:{value:e.groupBy,callback:function(t){e.groupBy=t},expression:"groupBy"}}),n("div",[n("ul",e._l(e.orderedKeys,function(t){return n("li",{key:t.root+":"+t.type,class:e.getKeyClass(t),on:{mouseenter:function(n){return e.mouseEnter(t)},mouseleave:function(n){return e.mouseLeave(t)},click:function(n){return e.click(t)}}},[e._v("\n                "+e._s(t.rootName)+e._s(t.type)+"                     \n                "),t.definition.signCount>0&&e.highlightedKey==t?n("span",[e._v("\n                    "+e._s(t.definition.signCount)+e._s("sharp"==t.definition.sign?"♯":"♭")+"\n                ")]):e._e()])}),0)])],1)},O=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"label"},[e._v("Group by")])]),n("el-col",{attrs:{span:10}},[n("el-select",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("el-option",{attrs:{value:"root",label:"Root note"}}),n("el-option",{attrs:{value:"kind",label:"Kind"}})],1)],1)],1)},N=[],w="initialValue",S="change",$={model:{prop:w,event:S},data:function(){return{value:""}},props:[w],created:function(){this.value=this.initialValue},watch:{value:function(){this.$emit(S,this.value)}}},M=$,E={mixins:[M]},B=E,D=(n("d591"),Object(C["a"])(B,j,N,!1,null,"4bd6f3cc",null)),A=D.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"label"},[e._v("Select modes")])]),n("el-col",{attrs:{span:10}},[n("el-select",{attrs:{multiple:"",placeholder:"Select"},model:{value:e.selectedModes,callback:function(t){e.selectedModes=t},expression:"selectedModes"}},e._l(e.modes,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1)],1)},L=[],I=n("da59"),W={model:{prop:"value",event:"change"},props:{value:Array},data:function(){return{selectedModes:[]}},computed:{modes:function(){return I}},created:function(){this.selectedModes=this.value},watch:{selectedModes:function(){this.$emit("change",this.selectedModes)}}},G=W,F=(n("6edd"),Object(C["a"])(G,P,L,!1,null,"345caf10",null)),R=F.exports,T={components:{GroupSelector:A,ModeSelector:R},data:function(){return{highlightedKey:void 0,groupBy:"kind"}},computed:{keys:function(){return this.$store.getters.keys},selectedParallelKey:function(){var e=this;if(this.highlightedKey)return Object(u["find"])(this.$store.getters.allKeys,function(t){return t.containsAllNotes(e.highlightedKey.notes)&&t!=e.highlightedKey})},notes:function(){return this.$store.state.notes.map(function(e){return e.index})},orderedKeys:function(){var e=this;return Object(u["orderBy"])(this.keys,function(t){return"root"==e.groupBy?t.root:t.type})},selectedKey:function(){return this.$store.state.selectedKey},selectedChord:function(){return this.$store.state.selectedChord},modes:{get:function(){return this.$store.state.modes},set:function(e){this.$store.dispatch("setModes",e)}}},methods:{emitKeySelectedEvent:function(e){this.$store.dispatch("changeDemoKeys",{key:e})},mouseEnter:function(e){this.highlightedKey=e,this.emitKeySelectedEvent(e)},mouseLeave:function(e){this.highlightedKey=void 0,this.emitKeySelectedEvent(void 0)},click:function(e){this.$store.dispatch("setSelectedKey",e)},getKeyClass:function(e){var t=e==this.selectedKey?"selected-key":"",n=e==this.selectedParallelKey?"parallel-key":"";return"".concat(t," ").concat(n)}}},U=T,H=(n("f090"),Object(C["a"])(U,k,O,!1,null,"4ca33728",null)),J=H.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("group-selector",{model:{value:e.groupBy,callback:function(t){e.groupBy=t},expression:"groupBy"}}),n("div",{staticClass:"list"},[n("ul",e._l(e.orderedChords,function(t){return n("li",{key:t.root+":"+t.suffix+":"+t.subSuffix,class:e.getChordClass(t),on:{click:function(n){return e.click(t)}}},[n("div",{staticClass:"chord-line"},[n("div",{on:{mouseenter:function(n){return e.mouseEnter(t)},mouseleave:function(n){return e.mouseLeave(t)}}},[e._v("\n                        "+e._s(e.getChordRootName(t))+e._s(t.suffix)),n("span",{staticClass:"sub"},[e._v(e._s(t.subSuffix))])]),e._l(t.inversions,function(o){return n("div",{key:o.index,staticClass:"inversion",on:{mouseenter:function(n){return e.mouseEnter(t,o.index)},mouseleave:function(n){return e.mouseLeave(t)}}},[e._v("\n                            "+e._s(o.index)+"\n                    ")])})],2)])}),0)])],1)},q=[],z={components:{GroupSelector:A},data:function(){return{highlightedChord:void 0,groupBy:"root"}},computed:{chords:function(){return this.$store.getters.chords},orderedChords:function(){var e=this;return _.orderBy(this.chords,function(t){return"root"==e.groupBy?t.root:t.suffix+t.subSuffix})},selectedChord:function(){return this.$store.state.selectedChord},selectedKey:function(){return this.$store.state.selectedKey}},methods:{emitKeySelectedEvent:function(e,t){this.$store.dispatch("changeChordDemoKeys",{chord:e,inversionIndex:t})},mouseEnter:function(e,t){this.highlightedChord=e,this.emitKeySelectedEvent(e,t)},mouseLeave:function(e){this.highlightedChord=void 0,this.emitKeySelectedEvent(void 0)},click:function(e){this.$store.dispatch("setSelectedChord",e)},getChordClass:function(e){var t=this.selectedChord==e?"selected-chord":"";return"".concat(t)},getChordRootName:function(e){return this.selectedKey?e.getRootName(this.selectedKey):e.rootName}}},Q=z,X=(n("e5fd"),Object(C["a"])(Q,V,q,!1,null,"92ce4f0e",null)),Y=X.exports,Z={name:"app",components:{Keyboard:x,Keys:J,Chords:Y}},ee=Z,te=(n("5c0b"),Object(C["a"])(ee,s,i,!1,null,null,null)),ne=te.exports,oe=n("2f62"),se=n("d225"),ie=n("b0b4"),re=(n("aef6"),n("0e10")),ce=function(e){for(var t=[],n=1;n<=e.length-1;++n){for(var o=e.slice(),s=0;s<n;++s)o[s]+=12;t.push({index:n,notes:o})}return t},ue=function(){function e(t,n,o){Object(se["a"])(this,e),this.root=t,this.suffix=n,this.subSuffix="",(Object(u["endsWith"])(this.suffix,"2")||Object(u["endsWith"])(this.suffix,"4")||Object(u["endsWith"])(this.suffix,"7")||Object(u["endsWith"])(n,"9"))&&(this.suffix=this.suffix.substring(0,this.suffix.length-1),this.subSuffix=n[n.length-1]),Object(u["endsWith"])(this.suffix,"11")&&(this.suffix=this.suffix.substring(0,this.suffix.length-2),this.subSuffix="11"),this.notes=o,this.inversions=ce(this.notes)}return Object(ie["a"])(e,[{key:"getRootName",value:function(e){return e.getNodeNameByLinearIndex(this.root)}},{key:"containsAllNotes",value:function(e){var t=this;return Object(u["every"])(e,function(e){return Object(u["indexOf"])(t.notes.map(function(e){return e%12}),e%12)>=0})}},{key:"rootName",get:function(){var e=re[this.root];return e.endsWith("#")&&(e=e[0]+"♯"),e}}]),e}(),ae=n("92b9"),de=function(e){return new ue(e.root,e.type.suffix,e.type.notes.map(function(t){return e.root+t}))},le=function(){function e(){Object(se["a"])(this,e),this.chords=Object(u["flatten"])(Object(u["map"])(ae,function(e){return Object(u["range"])(12).map(function(t){return de({root:t,type:e})})}))}return Object(ie["a"])(e,[{key:"getChords",value:function(e,t){var n=this.chords.filter(function(t){return t.containsAllNotes(e)});if(!t)return n;var o=this.chords.filter(function(e){return t.containsAllNotes(e.notes)});return e&&e.length?Object(u["intersection"])(n,o):o}}]),e}(),fe=(n("7f7f"),n("f0ee")),he="Ionian",me=function(e){return e.map(function(t,n){for(var o=0,s=0;s<=n;++s)o+=e[s];return o})},ye=function(e,t){var n=e;return n+=t==he?6:3,n>11&&(n-=12),re[n]},ve=function(e,t){var n=t.Name==he?re[e]:ye(e,t),o=Object(u["find"])(fe,function(e){return e.root==n});return o},ge=function(){function e(t,n){Object(se["a"])(this,e),this.root=t,this.definition=ve(t,n),this.type=n.shortName;var o=me(n.intervals);this.notes=o.map(function(e){return(t+e)%12}),this.modeName=n.name}return Object(ie["a"])(e,[{key:"getNoteName",value:function(e){e=this.notes[e],e>11&&(e-=12);var t=re[e];return"sharp"==this.definition.sign&&(6==this.definition.signCount&&"F"==t&&(t="E#"),7==this.definition.signCount&&"C"==t&&(t="B#")),t.endsWith("#")&&"flat"==this.definition.sign?t=re[e+1]+"♭":t.endsWith("#")&&(t=t[0]+"♯"),t}},{key:"getNodeNameByLinearIndex",value:function(e){var t=Object(u["findIndex"])(this.notes,function(t){return t==e});return t>=0?this.getNoteName(t):""}},{key:"containsAllNotes",value:function(e){var t=this;return Object(u["every"])(e,function(e){return Object(u["indexOf"])(t.notes,e%12)>=0})}},{key:"rootName",get:function(){return this.getNoteName(0)}}]),e}(),pe=function(e){return new ge(e.root,e.mode)},be=function(){function e(){Object(se["a"])(this,e);var t=I.map(function(e){return Object(u["range"])(12).map(function(t){return pe({root:t,mode:e})})});this.keys=_.flatten(t)}return Object(ie["a"])(e,[{key:"getKeys",value:function(e,t){var n=this.keys.filter(function(t){return t.containsAllNotes(e)});if(!t)return n;var o=this.keys.filter(function(e){return e.containsAllNotes(t.notes)});return e&&e.length?Object(u["intersection"])(n,o):o}}]),e}();o["default"].use(oe["a"]);var Ce=new le,Ke=new be,xe=new oe["a"].Store({state:{notes:[],demoKeys:[],demoChordMode:!1,selectedKey:void 0,selectedChord:void 0,demoKey:void 0,modes:["Ionian","Aeolian"]},mutations:{changePressedKeys:function(e,t){e.notes=t.keys},changeDemoKeys:function(e,t){t.key?(e.demoKeys=t.key.notes,e.demoKey=t.key):(e.demoKeys=[],e.demoKey=void 0)},changeDemoChordMode:function(e,t){e.demoChordMode=t},setSelectedKey:function(e,t){e.selectedKey==t&&(t=void 0),e.selectedKey=t},setSelectedChord:function(e,t){e.selectedChord==t&&(t=void 0),e.selectedChord=t},reset:function(e){e.selectedChord=void 0,e.selectedKey=void 0},setModes:function(e,t){e.modes=t}},actions:{changePressedKeys:function(e,t){e.commit("changePressedKeys",t)},changeDemoKeys:function(e,t){e.commit("changeDemoKeys",t),e.commit("changeDemoChordMode",!1)},changeChordDemoKeys:function(e,t){t.key=t.chord?{notes:t.inversionIndex?Object(u["find"])(t.chord.inversions,function(e){return e.index==t.inversionIndex}).notes:t.chord.notes}:void 0,e.commit("changeDemoKeys",t),e.commit("changeDemoChordMode",!0)},setSelectedKey:function(e,t){e.commit("setSelectedKey",t)},setSelectedChord:function(e,t){e.commit("setSelectedChord",t)},reset:function(e){e.commit("reset")},setModes:function(e,t){var n=e.commit;n("setModes",t)}},getters:{chords:function(e){return Ce.getChords(e.notes.filter(function(e){return!!e.down}).map(function(e){return e.index}),e.selectedKey)},keys:function(e){return Ke.getKeys(e.notes.filter(function(e){return!!e.down}).map(function(e){return e.index}),e.selectedChord).filter(function(t){return _.some(e.modes,function(e){return e==t.modeName})})},allKeys:function(e){return Ke.keys.filter(function(t){return _.some(e.modes,function(e){return e==t.modeName})})}}}),ke=n("5c96"),Oe=n.n(ke);n("0fae");o["default"].config.productionTip=!1,o["default"].use(Oe.a),new o["default"]({store:xe,render:function(e){return e(ne)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("5e27"),s=n.n(o);s.a},"5e27":function(e,t,n){},"6b54":function(e,t,n){},"6edd":function(e,t,n){"use strict";var o=n("6b54"),s=n.n(o);s.a},"92b9":function(e){e.exports=[{suffix:"",notes:[0,4,7]},{suffix:"m",notes:[0,3,7]},{suffix:"dim",notes:[0,3,6]},{suffix:"M7",notes:[0,4,7,11]},{suffix:"m7",notes:[0,3,7,10]},{suffix:"7",notes:[0,4,7,10]},{suffix:"sus2",notes:[0,2,7]},{suffix:"sus4",notes:[0,5,7]},{suffix:"aug",notes:[0,4,8]},{suffix:"9",notes:[0,4,7,10,14]},{suffix:"M11",notes:[0,4,7,11,14,17]}]},cda0:function(e,t,n){},d591:function(e,t,n){"use strict";var o=n("e471"),s=n.n(o);s.a},da59:function(e){e.exports=[{name:"Ionian",shortName:"",intervals:[0,2,2,1,2,2,2,1]},{name:"Aeolian",shortName:"m",intervals:[0,2,1,2,2,1,2,2]},{name:"Dorian",shortName:" dorian minor",intervals:[0,2,1,2,2,2,1,2]},{name:"Phrygian",shortName:" phrygian minor",intervals:[0,1,2,2,2,1,2,2]},{name:"Lydian",shortName:" lydian major",intervals:[0,2,2,2,1,2,2,1]},{name:"Mixolydian",shortName:" mixolydian major",intervals:[0,2,2,1,2,2,1,2]},{name:"Locrian",shortName:"ocrian",intervals:[0,1,2,2,1,2,2,2]}]},e471:function(e,t,n){},e5fd:function(e,t,n){"use strict";var o=n("13e5"),s=n.n(o);s.a},f090:function(e,t,n){"use strict";var o=n("48cc"),s=n.n(o);s.a},f0ee:function(e){e.exports=[{root:"C",sign:"sharp",signCount:0},{root:"G",sign:"sharp",signCount:1},{root:"D",sign:"sharp",signCount:2},{root:"A",sign:"sharp",signCount:3},{root:"E",sign:"sharp",signCount:4},{root:"B",sign:"sharp",signCount:5},{root:"F#",sign:"sharp",signCount:6},{root:"F",sign:"flat",signCount:1},{root:"A#",sign:"flat",signCount:2},{root:"D#",sign:"flat",signCount:3},{root:"G#",sign:"flat",signCount:4},{root:"C#",sign:"flat",signCount:5},{root:"F#",sign:"flat",signCount:6},{root:"B#",sign:"flat",signCount:7}]}});